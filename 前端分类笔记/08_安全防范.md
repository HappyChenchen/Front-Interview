[常见六大Web安全攻防解析](https://github.com/ljianshu/Blog/issues/56#) 

## XSS攻击

- 定义：XSS (Cross-Site Scripting)，跨站脚本攻击，因为缩写和 CSS重叠，所以只能叫 XSS。跨站脚本攻击是指通过存在安全漏洞的Web网站注册用户的浏览器内运行非法的HTML标签或JavaScript进行的一种攻击。
- 反射性和存储型
  - 反射型：在url注入恶意请求，访问的用户会被攻击
  - 存储型：在博客这样的东西中注入恶意请求，这些请求会被存储下来，访问到这些内容的用户会全部被攻击
- 防止：
  - CSP，建立白名单，开发者明确告诉浏览器哪些外部资源可以加载和执行。
  - 对特殊字符进行转义
  - HttpOnly Cookie



## CSRF攻击

- 定义：CSRF(Cross Site Request Forgery)，即跨站请求伪造，是一种常见的Web攻击，它利用用户已登录的身份，在用户毫不知情的情况下，以用户的名义完成非法操作。

- 内容：当用户访问网站A的时候填写了自己的用户信息，保存在了cookie中，此时访问了网站B，而网站B对网站A发出一个恶意请求，该请求携带了用户的登录信息，被网站A接受，就可以执行这个恶意请求，造成损失

- 预防
  - SameSite。
  
    对 Cookie 设置 SameSite 属性。该属性表示 Cookie 不随着跨域请求发送，可以很大程度减少 CSRF 的攻击，但是该属性目前并不是所有浏览器都兼容。
  
  - 对reference进行验证。
  
    但在某些情况下如从https跳转到http，浏览器处于安全考虑，不会发送referer，服务器就无法进行check了。因此，该方法不是很可靠，但也可以监控CSRF攻击的发生。
  
  - 在请求中添加token,对token进行验证。
  
    发送请求时在HTTP 请求中以参数的形式加入一个随机产生的token，并在服务器建立一个拦截器来验证这个token。服务器读取浏览器当前域cookie中这个token值，会进行校验该请求当中的token和cookie当中的token值是否都存在且相等，才认为这是合法的请求。否则认为这次请求是违法的，拒绝该次服务。
  
  - 进行验证码校验



## 点击劫持

- 定义：击者将需要攻击的网站通过 iframe 嵌套的方式嵌入自己的网页中，并将 iframe 设置为透明，在页面中透出一个按钮诱导用户点击。
- 预防：
  - X-FRAME-OPTIONS
  - js 防御



## URL跳转漏洞

- 定义：借助未验证的URL跳转，将应用程序引导到不安全的第三方区域，从而导致的安全问题。
- 预防：
  - referer的限制
  - 加入有效性验证Token



## SQL注入攻击

- 定义：对sql语句进行注入，以达到对数据库的恶意操作。比如说在查询的时候加一个让查询语句恒等的式子，只需要随便输入一个用户名，就可以访问到这个数据库
- 防御：
  - 严格限制Web应用的数据库的操作权限
  - 后端代码检查输入的数据是否符合预期
  - 对特殊字符进行转义
  - 所有的查询语句建议使用数据库提供的参数化查询接口



## OS命令注入攻击

- 定义：命令注入攻击可以向Shell发送命令，让Windows或Linux操作系统的命令行启动程序。也就是说，通过命令注入攻击，可执行操作系统上安装着的各种程序。
- 防御：
  - 后端对前端提交内容进行规则限制（比如正则表达式）。
  - 在调用系统命令前对所有传入参数进行命令行参数转义过滤。
  - 不要直接拼接命令语句，借助一些工具做拼接、转义预处理，例如 Node.js 的 `shell-escape npm`包。